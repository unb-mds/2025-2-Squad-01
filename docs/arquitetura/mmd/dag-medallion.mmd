graph LR
    %% DAG - Arquitetura MedalhÃ£o: Bronze â†’ Silver â†’ Gold
    %% Fluxo de transformaÃ§Ã£o de dados para Dashboard AcadÃªmico
    
    subgraph Sources ["ğŸ“¡ Fontes de Dados"]
        A1[GitHub API<br/>Organization]
        A2[GitHub API<br/>Repositories]  
        A3[GitHub API<br/>Issues]
        A4[GitHub API<br/>Pull Requests]
        A5[GitHub API<br/>Commits]
        A6[GitHub API<br/>Reviews/Comments]
        A7[GitHub API<br/>Traffic/Clones]
    end
    
    subgraph Bronze ["ğŸ¥‰ Bronze Layer (Raw)"]
        B1[org_data.json<br/>timestamp: 2025-01-15]
        B2[repos_data.json<br/>timestamp: 2025-01-15]
        B3[issues_data.json<br/>timestamp: 2025-01-15] 
        B4[prs_data.json<br/>timestamp: 2025-01-15]
        B5[commits_data.json<br/>timestamp: 2025-01-15]
        B6[reviews_data.json<br/>timestamp: 2025-01-15]
        B7[traffic_data.json<br/>timestamp: 2025-01-15]
    end
    
    subgraph Silver ["ğŸ¥ˆ Silver Layer (Normalized)"]
        S1[dim_organization<br/>ğŸ”‘ org_id, name, type]
        S2[dim_repositories<br/>ğŸ”‘ repo_id, name, language]
        S3[dim_users<br/>ğŸ”‘ user_id, login, type]
        S4[fact_issues<br/>ğŸ”‘ issue_id, ğŸ”— repo_id, user_id]
        S5[fact_pull_requests<br/>ğŸ”‘ pr_id, ğŸ”— repo_id, author_id]
        S6[fact_commits<br/>ğŸ”‘ commit_sha, ğŸ”— repo_id, author_id]
        S7[fact_reviews<br/>ğŸ”‘ review_id, ğŸ”— pr_id, reviewer_id]
        S8[fact_relationships<br/>ğŸ”‘ author_id, reviewer_id, type]
        S9[fact_traffic<br/>ğŸ”‘ repo_id, date, clones, views]
    end
    
    subgraph Gold ["ğŸ¥‡ Gold Layer (KPIs & Analytics)"]
        G1[ğŸ“ˆ Throughput Metrics<br/>â€¢ Commits/semana<br/>â€¢ PRs/Issues por perÃ­odo<br/>â€¢ Code churn]
        G2[â±ï¸ Lead Time Metrics<br/>â€¢ Issue resolution time<br/>â€¢ PR merge time<br/>â€¢ First response time]
        G3[ğŸ¤ Collaboration Metrics<br/>â€¢ Review participation<br/>â€¢ Cross-repo collaboration<br/>â€¢ Network centrality]
        G4[ğŸ“Š Distribution Analysis<br/>â€¢ Gini coefficient<br/>â€¢ Contribution concentration<br/>â€¢ Activity regularidade]
        G5[ğŸ¯ Behavioral Insights<br/>â€¢ Activity heatmaps<br/>â€¢ Maturity scoring<br/>â€¢ Member profiles]
        G6[ğŸ”® Predictive KPIs<br/>â€¢ Slope 8w Initial ramp<br/>â€¢ Clone intentions<br/>â€¢ Success predictors]
    end
    
    subgraph Dashboard ["ğŸ“Š Dashboard Views"]
        D1[Project Overview<br/>ğŸ“ˆ High-level KPIs]
        D2[Team Analytics<br/>ğŸ‘¥ Collaboration patterns]  
        D3[Individual Profiles<br/>ğŸ‘¤ Member insights]
        D4[Temporal Analysis<br/>ğŸ“… Time-based trends]
    end
    
    %% Bronze ingestion flows
    A1 --> B1
    A2 --> B2  
    A3 --> B3
    A4 --> B4
    A5 --> B5
    A6 --> B6
    A7 --> B7
    
    %% Silver transformation flows
    B1 --> S1
    B2 --> S2
    B1 & B2 --> S3
    B3 --> S4
    B4 --> S5  
    B5 --> S6
    B6 --> S7
    B6 & B4 --> S8
    B7 --> S9
    
    %% Gold aggregation flows  
    S4 & S5 & S6 --> G1
    S4 & S5 & S7 --> G2
    S7 & S8 --> G3
    S6 & S4 & S5 --> G4
    S3 & S6 & S9 --> G5
    S9 & S6 --> G6
    
    %% Dashboard consumption
    G1 --> D1
    G2 --> D1
    G3 --> D2
    G4 --> D2
    G5 --> D3
    G6 --> D4
    
    %% Styling
    classDef sourceClass fill:#ffebee,stroke:#c62828,stroke-width:2px;
    classDef bronzeClass fill:#fff8e1,stroke:#ff8f00,stroke-width:2px;
    classDef silverClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px;  
    classDef goldClass fill:#f1f8e9,stroke:#33691e,stroke-width:2px;
    classDef dashClass fill:#e3f2fd,stroke:#1565c0,stroke-width:2px;
    
    class A1,A2,A3,A4,A5,A6,A7 sourceClass;
    class B1,B2,B3,B4,B5,B6,B7 bronzeClass;
    class S1,S2,S3,S4,S5,S6,S7,S8,S9 silverClass;
    class G1,G2,G3,G4,G5,G6 goldClass;  
    class D1,D2,D3,D4 dashClass;
