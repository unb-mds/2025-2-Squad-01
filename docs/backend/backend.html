<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend - CoOps</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-dark: #0d1117;
            --bg-card: #161b22;
            --bg-hover: #1c2128;
            --primary: #58a6ff;
            --secondary: #8b949e;
            --accent: #f85149;
            --success: #3fb950;
            --warning: #d29922;
            --border: #30363d;
            --text: #c9d1d9;
            --text-muted: #8b949e;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #1a1f35 0%, #0d1117 100%);
            padding: 3rem 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: relative;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), #a371f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        /* Navigation */
        nav {
            background: var(--bg-card);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        nav a {
            color: var(--text);
            text-decoration: none;
            margin-right: 2rem;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        /* Overview */
        .overview {
            background: linear-gradient(135deg, #1a1f35, #0d1117);
            border: 1px solid var(--border);
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }
        
        .overview h2 {
            color: var(--primary);
            margin-top: 0;
        }
        
        /* Section */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        /* Tech Card */
        .tech-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-left: 4px solid var(--success);
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }
        
        /* Headings */
        h2 {
            color: var(--primary);
            font-size: 2rem;
            font-weight: 700;
            margin: 1.5rem 0 1rem;
        }
        
        h3 {
            color: var(--text);
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem;
        }
        
        h4 {
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: 600;
            margin: 1rem 0 0.5rem;
        }
        
        p {
            margin-bottom: 1rem;
            color: var(--text-muted);
        }
        
        /* Lists */
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        li {
            margin: 0.5rem 0;
            color: var(--text-muted);
        }
        
        strong {
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Code */
        code {
            background: var(--bg-hover);
            color: var(--primary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #0d1117;
            border: 1px solid var(--border);
            color: #e6edf3;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
        }
        
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        
        /* Advantages Grid */
        .advantages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .advantage-item {
            background: linear-gradient(135deg, #3fb95022, #3fb95011);
            border-left: 4px solid var(--success);
            padding: 1rem;
            border-radius: 8px;
        }
        
        .advantage-item::before {
            content: '‚úÖ ';
            margin-right: 0.5rem;
        }
        
        /* MVC Grid (Medalh√£o) */
        .mvc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .mvc-item {
            background: var(--bg-hover);
            padding: 1.5rem;
            border-radius: 8px;
            transition: border-color 0.2s;
        }
        
        .mvc-item.model {
            border-left: 4px solid #cd7f32;
        }
        
        .mvc-item.view {
            border-left: 4px solid #c0c0c0;
        }
        
        .mvc-item.controller {
            border-left: 4px solid #ffd700;
        }
        
        .mvc-item:hover {
            border-color: var(--primary);
        }
        
        /* Workflow */
        .workflow {
            background: linear-gradient(135deg, #d2992222, #d2992211);
            border-left: 4px solid var(--warning);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        
        .workflow h2, .workflow h3 {
            color: var(--warning);
        }
        
        /* Example Section */
        .example-section {
            background: var(--bg-hover);
            border-left: 4px solid var(--primary);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        
        /* Concept Explanation */
        .concept-explanation {
            background: linear-gradient(135deg, #3fb95022, #3fb95011);
            border-left: 3px solid var(--success);
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }
        
        /* Back Link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
            padding: 0.75rem 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .back-link:hover {
            background: var(--bg-hover);
            border-color: var(--primary);
            transform: translateX(-5px);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section, .tech-card {
            animation: fadeIn 0.5s ease-out;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            header h1 { font-size: 2rem; }
            .container { padding: 0 1rem; }
            nav a { margin-right: 1rem; font-size: 0.9rem; }
            .advantages { grid-template-columns: 1fr; }
            .mvc-grid { grid-template-columns: 1fr; }
            pre { font-size: 0.8rem; padding: 1rem; }
        }
    </style>
</head>
<body>
    <header>
        <h1>‚öôÔ∏è Documenta√ß√£o Backend</h1>
        <p>Python + GitHub Actions + Arquitetura Medallion</p>
    </header>

    <nav>
        <a href="../index.html">‚Üê Documenta√ß√£o</a>
        <a href="#overview">Vis√£o Geral</a>
        <a href="#responsabilidades">Responsabilidades</a>
        <a href="#tecnologias">Tecnologias</a>
        <a href="#medalhao">Arquitetura</a>
        <a href="#exemplos">Exemplos</a>
    </nav>

    <div class="container">
        <div class="overview" id="overview">
            <h2>O que √© Backend?</h2>
            <p>O <strong>backend</strong> √© a parte de uma aplica√ß√£o web respons√°vel por toda a l√≥gica de neg√≥cio, processamento de dados, autentica√ß√£o, autoriza√ß√£o e comunica√ß√£o com o banco de dados. √â a "parte invis√≠vel" da aplica√ß√£o que funciona nos bastidores, processando as requisi√ß√µes enviadas pelo frontend e retornando as respostas apropriadas.</p>
        </div>

        <div class="section" id="responsabilidades">
            <h2>Principais Responsabilidades do Backend</h2>
            <ul>
                <li><strong>Processamento de Dados:</strong> Manipula, valida e processa informa√ß√µes da API do GitHub</li>
                <li><strong>Integra√ß√£o com APIs Externas:</strong> Consome dados da API do GitHub em tempo real</li>
                <li><strong>Transforma√ß√£o de Dados:</strong> Aplica arquitetura medalh√£o para estruturar dados (Bronze, Silver, Gold)</li>
                <li><strong>APIs REST:</strong> Fornece endpoints para comunica√ß√£o com o frontend</li>
                <li><strong>L√≥gica de Neg√≥cio:</strong> Implementa as regras de an√°lise de m√©tricas de produtividade</li>
                <li><strong>Seguran√ßa:</strong> Protege tokens de acesso e previne ataques</li>
                <li><strong>Performance:</strong> Otimiza processamento de dados em mem√≥ria para melhor desempenho</li>
            </ul>
        </div>

        <div class="workflow">
            <h2>Como Funciona o Backend?</h2>
            <p>O backend segue uma arquitetura baseada em <strong>requisi√ß√£o-resposta</strong> com processamento automatizado via <strong>GitHub Actions</strong>:</p>
            <ol>
                <li><strong>Extra√ß√£o de Dados:</strong> GitHub Actions executa scripts Python diariamente para coletar dados da API do GitHub</li>
                <li><strong>Processamento ETL:</strong> Os dados passam pelo pipeline Bronze ‚Üí Silver ‚Üí Gold em camadas sequenciais</li>
                <li><strong>Armazenamento:</strong> Dados s√£o armazenados como JSON/tabelas no pr√≥prio reposit√≥rio GitHub</li>
                <li><strong>Consumo:</strong> Dashboard React consome os dados processados via GitHub API</li>
                <li><strong>Resposta:</strong> Interface apresenta m√©tricas e KPIs em tempo real para os usu√°rios</li>
            </ol>
        </div>

        <div class="section" id="tecnologias">
            <h2>üõ†Ô∏è Tecnologias Utilizadas</h2>
            
            <div class="tech-card">
                <h3>üêç Python + GitHub Actions</h3>
                <p>O <strong>Python</strong> √© utilizado junto com <strong>GitHub Actions</strong> para criar um pipeline automatizado de ETL (Extract, Transform, Load) que processa dados da API do GitHub diariamente, seguindo a arquitetura medalh√£o.</p>
                
                <h4>Vantagens para o Projeto:</h4>
                <div class="advantages">
                    <div class="advantage-item">Automa√ß√£o completa via GitHub Actions (execu√ß√£o di√°ria)</div>
                    <div class="advantage-item">Processamento eficiente de dados da API do GitHub</div>
                    <div class="advantage-item">Armazenamento no pr√≥prio reposit√≥rio (sem infraestrutura externa)</div>
                    <div class="advantage-item">Pipeline robusto Bronze ‚Üí Silver ‚Üí Gold</div>
                    <div class="advantage-item">Facilidade de manuten√ß√£o e versionamento do c√≥digo</div>
                    <div class="advantage-item">Integra√ß√£o nativa com ecossistema GitHub</div>
                </div>
            </div>

            <div class="tech-card">
                <h3>üì¶ Armazenamento no Reposit√≥rio GitHub</h3>
                <p>O projeto utiliza <strong>armazenamento baseado em arquivos</strong> diretamente no reposit√≥rio GitHub, eliminando a necessidade de infraestrutura de banco de dados externa. Os dados s√£o organizados em camadas dentro do pr√≥prio reposit√≥rio.</p>
                
                <h4>Vantagens para o Projeto:</h4>
                <div class="advantages">
                    <div class="advantage-item">Dados versionados junto com o c√≥digo (hist√≥rico completo)</div>
                    <div class="advantage-item">Zero custo de infraestrutura externa</div>
                    <div class="advantage-item">Backup autom√°tico via GitHub</div>
                    <div class="advantage-item">Acesso direto via GitHub API para o frontend</div>
                    <div class="advantage-item">Transpar√™ncia total dos dados processados</div>
                    <div class="advantage-item">Facilidade de deploy e distribui√ß√£o</div>
                </div>
            </div>
        </div>

        <div class="section" id="medalhao">
            <h2>üèÖ Arquitetura Medallion (Bronze, Silver, Gold)</h2>
            <p>A arquitetura medalh√£o √© um padr√£o moderno para processamento de dados que organiza o pipeline em tr√™s camadas hier√°rquicas, cada uma com responsabilidades espec√≠ficas e n√≠veis crescentes de qualidade e refinamento dos dados.</p>
            
            <div class="mvc-grid">
                <div class="mvc-item model">
                    <h4>ü•â 1. Camada Bronze (Dados Brutos)</h4>
                    <p><strong>Responsabilidade:</strong> Ingest√£o e armazenamento dos dados brutos exatamente como recebidos da API do GitHub.</p>
                    <p><strong>Fun√ß√£o:</strong> Captura dados em tempo real sem transforma√ß√µes, mantendo a estrutura original da API.</p>
                    <p><strong>Exemplo de uso:</strong> Dados de commits, issues, pull requests, contribuidores diretamente da API GitHub.</p>
                    <p><strong>Benef√≠cio:</strong> Preserva a integridade dos dados originais e permite reprocessamento posterior se necess√°rio.</p>
                </div>
                
                <div class="mvc-item view">
                    <h4>ü•à 2. Camada Silver (Dados Limpos)</h4>
                    <p><strong>Responsabilidade:</strong> Limpeza, valida√ß√£o e estrutura√ß√£o dos dados brutos da camada Bronze.</p>
                    <p><strong>Fun√ß√£o:</strong> Aplica regras de neg√≥cio, remove inconsist√™ncias, padroniza formatos e enriquece os dados.</p>
                    <p><strong>Exemplo de uso:</strong> Normaliza√ß√£o de datas, valida√ß√£o de tipos, agrega√ß√£o de m√©tricas b√°sicas, c√°lculo de estat√≠sticas.</p>
                    <p><strong>Benef√≠cio:</strong> Dados confi√°veis e estruturados, prontos para an√°lises mais complexas.</p>
                </div>
                
                <div class="mvc-item controller">
                    <h4>ü•á 3. Camada Gold (Dados Anal√≠ticos)</h4>
                    <p><strong>Responsabilidade:</strong> Cria√ß√£o de datasets otimizados para an√°lise e apresenta√ß√£o, com m√©tricas de alto n√≠vel.</p>
                    <p><strong>Fun√ß√£o:</strong> Agrega dados da camada Silver em m√©tricas de produtividade, KPIs e insights de neg√≥cio.</p>
                    <p><strong>Exemplo de uso:</strong> M√©tricas de produtividade da equipe, an√°lise de padr√µes de contribui√ß√£o, relat√≥rios executivos.</p>
                    <p><strong>Benef√≠cio:</strong> Dados prontos para consumo direto pelo frontend, otimizados para performance e clareza.</p>
                </div>
            </div>
            
            <div class="workflow">
                <h3>Fluxo de Processamento</h3>
                <pre><code>API GitHub ‚Üí Bronze ‚Üí Silver ‚Üí Gold ‚Üí Frontend</code></pre>
                <ol>
                    <li><strong>Bronze:</strong> Dados brutos da API GitHub s√£o coletados em tempo real</li>
                    <li><strong>Silver:</strong> Dados s√£o limpos, validados e estruturados</li>
                    <li><strong>Gold:</strong> M√©tricas finais s√£o calculadas e otimizadas para apresenta√ß√£o</li>
                    <li><strong>Frontend:</strong> Consome dados da camada Gold via APIs REST</li>
                </ol>
            </div>
        </div>

        <div class="section" id="exemplos">
            <h2>üíª Exemplos Pr√°ticos com Python</h2>

            <div class="example-section">
                <h3>1. Uso de Vari√°veis de Ambiente (.env)</h3>
                <div class="concept-explanation">
                    <p><strong>O que √©?</strong> Vari√°veis de ambiente s√£o arquivos que armazenam informa√ß√µes sens√≠veis (como tokens de API, configura√ß√µes de acesso) fora do c√≥digo-fonte.</p>
                    <p><strong>Por que usar?</strong> Seguran√ßa, facilidade de configura√ß√£o e portabilidade entre ambientes.</p>
                </div>
                
                <p><strong>Exemplo de arquivo .env:</strong></p>
                <pre><code>GITHUB_TOKEN=seu_token_aqui
GITHUB_API_URL=https://api.github.com</code></pre>
                
                <p><strong>Como carregar no Python:</strong></p>
                <pre><code>import os
from dotenv import load_dotenv

load_dotenv()
github_token = os.getenv('GITHUB_TOKEN')</code></pre>
            </div>

            <div class="example-section">
                <h3>2. Camada Bronze - Consumo de Dados Brutos</h3>
                <div class="concept-explanation">
                    <p><strong>O que √©?</strong> A camada Bronze coleta dados brutos diretamente da API do GitHub sem transforma√ß√µes, mantendo a estrutura original.</p>
                    <p><strong>Para que serve?</strong> Capturar dados em tempo real da fonte original e preservar integridade dos dados para posterior reprocessamento.</p>
                </div>
                
                <pre><code>import requests
from datetime import datetime

class GitHubBronzeLayer:
    def __init__(self, token):
        self.token = token
        self.headers = {'Authorization': f'token {token}'}
    
    def fetch_raw_commits(self, owner, repo):
        """Busca dados brutos de commits diretamente da API"""
        url = f"https://api.github.com/repos/{owner}/{repo}/commits"
        response = requests.get(url, headers=self.headers)
        if response.status_code == 200:
            return {
                'data': response.json(),
                'fetched_at': datetime.utcnow().isoformat(),
                'source': 'github_api'
            }
        return None</code></pre>
            </div>

            <div class="example-section">
                <h3>3. Camada Silver - Limpeza e Estrutura√ß√£o</h3>
                <div class="concept-explanation">
                    <p><strong>O que √©?</strong> A camada Silver processa os dados brutos da Bronze, aplicando limpeza, valida√ß√£o e estrutura√ß√£o.</p>
                    <p><strong>Para que serve?</strong> Limpar e validar dados inconsistentes, padronizar formatos e estruturas, aplicar regras de neg√≥cio b√°sicas.</p>
                </div>
                
                <pre><code>from dataclasses import dataclass
from typing import List

@dataclass
class CleanCommit:
    sha: str
    author: str
    date: datetime
    message: str
    additions: int
    deletions: int

class GitHubSilverLayer:
    def clean_commits(self, bronze_data: dict) -> List[CleanCommit]:
        """Limpa e estrutura dados de commits da camada Bronze"""
        commits = []
        
        for commit_data in bronze_data.get('data', []):
            try:
                clean_commit = CleanCommit(
                    sha=commit_data['sha'][:7],
                    author=commit_data['commit']['author']['name'],
                    date=datetime.fromisoformat(
                        commit_data['commit']['author']['date'].replace('Z', '+00:00')
                    ),
                    message=commit_data['commit']['message'].split('\n')[0],
                    additions=commit_data.get('stats', {}).get('additions', 0),
                    deletions=commit_data.get('stats', {}).get('deletions', 0)
                )
                commits.append(clean_commit)
            except (KeyError, ValueError) as e:
                print(f"Erro ao processar commit: {e}")
                continue
        
        return commits</code></pre>
            </div>

            <div class="example-section">
                <h3>4. Camada Gold - M√©tricas e Insights</h3>
                <div class="concept-explanation">
                    <p><strong>O que √©?</strong> A camada Gold agrega dados da Silver em m√©tricas de alto n√≠vel e insights de neg√≥cio.</p>
                    <p><strong>Para que serve?</strong> Calcular KPIs e m√©tricas de produtividade, gerar insights para tomada de decis√£o, otimizar dados para apresenta√ß√£o no frontend.</p>
                </div>
                
                <pre><code>from collections import defaultdict
from dataclasses import dataclass

@dataclass
class ProductivityMetrics:
    total_commits: int
    active_contributors: int
    average_commits_per_day: float
    top_contributors: List[tuple]
    commit_frequency: dict

class GitHubGoldLayer:
    def calculate_productivity_metrics(self, silver_commits: List[CleanCommit]):
        """Calcula m√©tricas de produtividade da camada Silver"""
        
        contributor_commits = defaultdict(int)
        daily_commits = defaultdict(int)
        
        for commit in silver_commits:
            contributor_commits[commit.author] += 1
            day = commit.date.date()
            daily_commits[day] += 1
        
        top_contributors = sorted(
            contributor_commits.items(), 
            key=lambda x: x[1], 
            reverse=True
        )[:5]
        
        total_days = len(daily_commits) if daily_commits else 1
        avg_commits_per_day = len(silver_commits) / total_days
        
        return ProductivityMetrics(
            total_commits=len(silver_commits),
            active_contributors=len(contributor_commits),
            average_commits_per_day=round(avg_commits_per_day, 2),
            top_contributors=top_contributors,
            commit_frequency=dict(daily_commits)
        )</code></pre>
            </div>
        </div>

        <a href="../index.html" class="back-link">
            ‚Üê Voltar para Documenta√ß√£o
        </a>
    </div>
</body>
</html>