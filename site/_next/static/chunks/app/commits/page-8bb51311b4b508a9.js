(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{5762:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var l=a(5155),s=a(2115),r=a(3690);function n(e){let{data:t}=e,a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var e;if(!a.current)return;let l=(0,r.Ltv)(a.current);if(l.selectAll("*").remove(),!t.length)return void l.append("text").attr("x","50%").attr("y","50%").attr("text-anchor","middle").attr("fill","currentColor").text("Nenhum commit dispon\xedvel para este reposit\xf3rio");let s=(0,r.WH)().domain(t.map(e=>e.dateLabel)).range([56,676]).padding(.12),n=(0,r.m4Y)().domain([0,null!=(e=(0,r.T9B)(t,e=>e.count))?e:0]).nice().range([228,24]);l.attr("viewBox","0 0 ".concat(700," ").concat(300));let o=Math.max(1,Math.floor(t.length/12)),i=t.map((e,t)=>({v:e.dateLabel,i:t})).filter(e=>e.i%o==0).map(e=>e.v);l.append("g").attr("transform","translate(0, ".concat(228,")")).call((0,r.l78)(s).tickValues(i).tickFormat(e=>String(e))).selectAll("text").style("text-anchor","end").attr("dx","-0.6em").attr("dy","0.15em").attr("transform","rotate(-35)"),l.append("g").attr("transform","translate(".concat(56,",0)")).call((0,r.V4s)(n).ticks(6)).append("text").attr("x",0).attr("y",8).attr("fill","currentColor").attr("text-anchor","start").attr("font-size",12).text("Commits"),l.append("g").selectAll("rect").data(t).join("rect").attr("x",e=>{var t;return null!=(t=s(e.dateLabel))?t:56}).attr("y",e=>n(e.count)).attr("width",s.bandwidth()).attr("height",e=>n(0)-n(e.count)).attr("rx",4).attr("fill","var(--color-primary, #2563eb)").append("title").text(e=>"".concat(e.dateLabel,": ").concat(e.count," commit(s)"))},[t]),(0,l.jsx)("svg",{ref:a,className:"w-full h-[300px]",role:"img","aria-label":"Histograma"})}function o(e){let{data:t}=e,a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!a.current)return;let e=(0,r.Ltv)(a.current);if(e.selectAll("*").remove(),!t.length)return void e.append("text").attr("x","50%").attr("y","50%").attr("text-anchor","middle").attr("fill","currentColor").text("Nenhum commit dispon\xedvel para este reposit\xf3rio");let l=(0,r.UMr)().domain(t.map(e=>e.label)).range([...r.zt,...r.zt]);e.attr("viewBox","0 0 ".concat(320," ").concat(320));let s=e.append("g").attr("transform","translate(".concat(160,",").concat(160,")")),n=(0,r.rLf)().sort(null).value(e=>e.value),o=(0,r.JLW)().innerRadius(0).outerRadius(154),i=n(t);s.selectAll("path").data(i).join("path").attr("d",e=>{var t;return null!=(t=o(e))?t:""}).attr("fill",e=>l(e.data.label)).attr("stroke","#fff").attr("stroke-width",1.2).append("title").text(e=>"".concat(e.data.label,": ").concat(e.data.value," commit(s)"))},[t]),(0,l.jsx)("svg",{ref:a,className:"w-full h-[320px]",role:"img","aria-label":"Gr\xe1fico de pizza"})}function i(){let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),[d,u]=(0,s.useState)("all");(0,s.useEffect)(()=>{let e=!1;return async function(){try{i(!0);let a=await fetch("https://raw.githubusercontent.com/unb-mds/2025-2-Squad-01/issue45/43/42-bronze-extraction-consolidation/data/bronze/commits_all.json");if(!a.ok)throw Error("Erro ao buscar dados: ".concat(a.status," ").concat(a.statusText));let l=await a.json(),s=function(e){let t=new Map;for(let a of e){if("_metadata"in a)continue;let e=a.repo_name;e&&(t.has(e)||t.set(e,[]),t.get(e).push(a))}let a=[],l=1;for(let[e,s]of t.entries()){let t=s.map(e=>{var t,a,l;return{sha:e.sha,url:e.html_url,message:e.commit.message,author:{login:(null==(t=e.author)?void 0:t.login)||e.commit.author.email||"unknown",displayName:e.commit.author.name||(null==(a=e.author)?void 0:a.login)||"Desconhecido",profileUrl:null==(l=e.author)?void 0:l.html_url},committedAt:e.commit.author.date}});a.push({id:l++,name:e,fullName:"unb-mds/".concat(e),url:"https://github.com/unb-mds/".concat(e),defaultBranch:"main",commits:t})}let s=a.reduce((e,t)=>e+t.commits.length,0);return{org:"unb-mds",generatedAt:new Date().toISOString(),repoCount:a.length,totalCommits:s,repositories:a}}(l);e||(t(s),u("all"),m(null))}catch(t){e||m(t instanceof Error?t.message:String(t))}finally{e||i(!1)}}(),()=>{e=!0}},[]);let x=null==e?void 0:e.repositories,f=(0,s.useMemo)(()=>null!=x?x:[],[x]),h=(0,s.useMemo)(()=>{var e;return"all"===d?{id:-1,name:"Todos os reposit\xf3rios",fullName:"Todos os reposit\xf3rios",url:"#",defaultBranch:"main",commits:f.flatMap(e=>e.commits)}:null!=(e=f.find(e=>e.id===d))?e:null},[f,d]);(0,s.useEffect)(()=>{0!==f.length&&"all"!==d&&(f.some(e=>e.id===d)||u("all"))},[f,d]);let p=(0,s.useMemo)(()=>{if(!h)return[];let e=new Map;for(let a of h.commits){var t;let l=a.committedAt.slice(0,10);e.set(l,(null!=(t=e.get(l))?t:0)+1)}return[...e.entries()].map(e=>{let[t,a]=e;return{dateLabel:t,count:a}}).sort((e,t)=>e.dateLabel<t.dateLabel?-1:+(e.dateLabel>t.dateLabel))},[h]),g=(0,s.useMemo)(()=>{if(!h)return[];let e=new Map;for(let a of h.commits){var t;let l=a.author.displayName||a.author.login||"Desconhecido";e.set(l,(null!=(t=e.get(l))?t:0)+1)}let a=[...e.entries()].sort((e,t)=>t[1]-e[1]),l=a.slice(0,8),s=a.slice(8).reduce((e,t)=>{let[,a]=t;return e+a},0),r=l.map(e=>{let[t,a]=e;return{label:t,value:a}});return s>0&&r.push({label:"Outros",value:s}),r},[h]),b=(0,r.UMr)().domain(g.map(e=>e.label)).range([...r.zt,...r.zt]);return(0,l.jsxs)("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/20 via-black to-blue-950/30"}),(0,l.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-600/5 rounded-full blur-3xl"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-slate-600/10 rounded-full blur-3xl"}),(0,l.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0)",backgroundSize:"20px 20px"}}),(0,l.jsxs)("div",{className:"relative mx-auto w-full max-w-8xl px-4 sm:px-6 lg:px-8 py-8 pt-6",children:[(0,l.jsx)("h2",{className:"text-4xl font-didot text-blue-600 leading-tight mb-2",children:"M\xe9tricas - Commits"}),h&&(0,l.jsx)("p",{className:"text-white/70 text-sm mb-4",children:"Todos os reposit\xf3rios"===h.name?"Mostrando dados agregados de ".concat(f.length," reposit\xf3rio(s) • ").concat(h.commits.length," commits total"):"Reposit\xf3rio: ".concat(h.name," • ").concat(h.commits.length," commits")}),(0,l.jsx)("div",{className:"flex justify-end -mt-3 mb-2",children:(0,l.jsx)("div",{className:"w-full sm:w-auto",children:(0,l.jsxs)("select",{value:d,onChange:e=>u("all"===e.target.value?"all":Number(e.target.value)),className:"w-full sm:w-auto rounded-md shadow px-3 py-2 text-sm border-none outline-none cursor-pointer",style:{background:"#4F4F4F",color:"#ffffff"},disabled:a,children:[(0,l.jsxs)("option",{value:"all",children:["Todos os reposit\xf3rios (",f.flatMap(e=>e.commits).length," commits)"]}),f.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," (",e.commits.length," commits)"]},e.id))]})})}),(0,l.jsxs)("section",{className:"flex flex-col lg:flex-row gap-6 -mt-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex lg:flex-col lg:w-20",children:(0,l.jsxs)("div",{className:"rounded-lg overflow-hidden h-full",style:{background:"#4F4F4F",color:"#ffffff"},children:[(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center py-2 text-sm",children:"Issues"}),(0,l.jsx)("div",{className:"h-px bg-slate-600"}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center py-2 text-sm",children:"PRs"}),(0,l.jsx)("div",{className:"h-px bg-slate-600"}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center py-2 text-sm",children:"Commits"}),(0,l.jsx)("div",{className:"h-px bg-slate-600"}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center py-2 text-sm",children:"Colabora\xe7\xe3o"}),(0,l.jsx)("div",{className:"h-px bg-slate-600"}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center py-2 text-sm",children:"Estruturas"})]})}),(0,l.jsxs)("div",{className:"flex-1 rounded-xl bg-white p-5 text-slate-900 shadow-sm min-h-[320px] flex flex-col min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h3",{className:"text-md font-medium",children:"Commits"}),(0,l.jsx)("div",{})]}),(0,l.jsx)("div",{className:"flex-1",children:a?(0,l.jsx)("p",{className:"py-8 text-center",children:"Carregando..."}):c?(0,l.jsx)("p",{className:"py-8 text-center text-rose-600",children:c}):(0,l.jsx)(n,{data:p})})]}),(0,l.jsxs)("div",{className:"w-full lg:w-[480px] rounded-xl bg-white p-5 text-slate-900 shadow-sm min-h-[340px] flex flex-col",children:[(0,l.jsx)("h3",{className:"text-md font-medium",children:"Por pessoa"}),(0,l.jsxs)("div",{className:"mt-4 flex gap-4 items-start flex-1",children:[(0,l.jsx)("div",{className:"w-48 flex-shrink-0",children:a?(0,l.jsx)("p",{children:"..."}):c?(0,l.jsx)("p",{className:"text-rose-600",children:c}):(0,l.jsx)(o,{data:g})}),(0,l.jsx)("ul",{className:"space-y-2 text-sm overflow-auto",children:g.map(e=>(0,l.jsxs)("li",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"inline-block h-3 w-3",style:{background:b(e.label)}}),(0,l.jsx)("span",{className:"truncate",children:e.label}),(0,l.jsx)("span",{className:"ml-auto font-medium",children:e.value})]},e.label))})]})]})]}),(0,l.jsx)("div",{className:"mt-6 flex justify-center",children:(0,l.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md",children:"explicar com IA"})}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("div",{className:"rounded-md p-6",style:{height:"calc(320px / 5)",background:"#4F4F4F",color:"#ffffff"},children:(0,l.jsx)("div",{className:"h-full flex items-center justify-center text-lg font-semibold",children:"EXPLICA\xc7\xc3O DA IA"})})})]})]})}},7758:(e,t,a)=>{Promise.resolve().then(a.bind(a,5762))}},e=>{e.O(0,[690,441,255,358],()=>e(e.s=7758)),_N_E=e.O()}]);